<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<meta name="description" content="Explore and learn from our curated collection of courses on Swayam - Your learning journey starts here."/>
<title>Swayam ‚Ä¢ Courses üéì</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
<style>
 :root {
      --fg: #f8fafc;
      --card: rgba(255, 255, 255, 0.05);
      --stroke: #334155;
      --brand: #3b82f6;
      --brand-hover: #2563eb;
      --success: #10b981;
      --warning: #f59e0b;
      --danger: #ef4444;
      --sidebar-width: 240px;
      --accent: #2563eb;
      --bg-light: #f4f6f9;
      --bg-dark: #0d1117;
      --card-light: #fff;
      --card-dark: #161b22;
    }
  
 *{box-sizing:border-box;}
    body {
      margin:0; font-family: Inter, Arial, sans-serif;
      background: var(--bg-light); transition:.3s;
    }
    body.dark { background: var(--bg-dark); color:#fff; }

  
  body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    display: flex;
    min-height: 100vh;
    background: var(--bg);
    color: var(--fg);
    transition: all 0.3s ease;
  }
  
  body.light {
    --bg: #f8fafc;
    --fg: #0f172a;
    --card: #ffffff;
    --stroke: #e2e8f0;
    --sidebar: #ffffff;
  }
  
  /* Sidebar */
  .sidebar {
    width: 280px;
    background: var(--sidebar);
    color: var(--fg);
    position: fixed;
    inset: 0 auto 0 0;
    padding: 24px;
    display: flex;
    flex-direction: column;
    border-right: 1px solid var(--stroke);
    box-shadow: 4px 0 15px rgba(0, 0, 0, 0.05);
    backdrop-filter: blur(10px);
  }
  
  .logo {
    display: flex;
    align-items: center;
    gap: 12px;
    justify-content: center;
    margin-bottom: 32px;
    text-decoration: none;
    color: var(--fg);
  }
  
  .logo img {
    width: 48px;
    height: 48px;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    transition: transform 0.2s ease;
  }
  
  .logo:hover img {
    transform: scale(1.05);
  }
  
  .nav {
    list-style: none;
    margin-top: 8px;
  }
  
  .nav a {
    display: flex;
    align-items: center;
    gap: 12px;
    color: #94a3b8;
    text-decoration: none;
    padding: 12px 16px;
    border-radius: 12px;
    font-weight: 500;
    margin: 4px 0;
    transition: all 0.2s ease;
  }
  
  .nav a:hover {
    background: rgba(255, 255, 255, 0.05);
    color: var(--fg);
    transform: translateX(4px);
  }
  
  .nav a.active {
    background: var(--brand);
    color: white;
    font-weight: 600;
  }
  
  .nav i {
    font-size: 1.2em;
    opacity: 0.9;
  }
  
  /* Main */
  .main {
    margin-left: 280px;
    flex: 1;
    padding: 0;
    max-width: 1920px;
    margin: 0 0 0 280px;
  }
  
  .topbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px 32px;
    background: rgba(255, 255, 255, 0.02);
    backdrop-filter: blur(10px);
    border-bottom: 1px solid var(--stroke);
    position: sticky;
    top: 0;
    z-index: 10;
  }
  
  /* Sidebar */
    .sidebar {
      position:fixed; top:0; left:0; bottom:0;
      width:var(--sidebar-width);
      background:#111827; color:#fff;
      padding:20px; z-index:1000;
      transform:translateX(0); transition:.3s;
      height:100vh;
      overflow-y:auto;
    }
    .sidebar h2 { margin:0 0 20px; text-align:center; }
    .sidebar ul { list-style:none; padding:0; margin:0; }
    .sidebar li {
      padding:12px; border-radius:8px; cursor:pointer;
      color:#cbd5e1; margin-bottom:6px;
      display:flex; align-items:center; gap:10px;
      transition:background .2s;
    }
    .sidebar li.active, .sidebar li:hover {
      background:var(--accent); color:#fff;
    }

    /* Hamburger menu */
    .hamburger {
      display:none; position:fixed; top:15px; left:15px;
      font-size:24px; background:var(--accent); color:#fff;
      border:none; padding:8px 12px; border-radius:6px; z-index:1100; cursor:pointer;
    }

  
  .mode {
    cursor: pointer;
    padding: 10px 16px;
    border-radius: 10px;
    background: var(--card);
    color: var(--fg);
    border: 1px solid var(--stroke);
    font-size: 1rem;
    transition: all 0.2s ease;
  }
  
  .mode:hover {
    background: rgba(255, 255, 255, 0.05);
    transform: translateY(-1px);
  }
  
  .grid {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 32px;
    max-width: 1400px;
    margin: 0 auto;
    padding: 24px;
  }
  
  .courses {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 24px;
  }
  
  .card {
    background: var(--card);
    border: 1px solid var(--stroke);
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    backdrop-filter: blur(10px);
  }
  
  .card:hover {
    transform: translateY(-4px);
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  }
  
  .card iframe {
    width: 100%;
    aspect-ratio: 16/9;
    border: 0;
    background: rgba(0, 0, 0, 0.05);
  }
  
  .body {
    padding: 20px;
  }
  
  .title {
    font-weight: 600;
    font-size: 1.125rem;
    margin-bottom: 8px;
    color: var(--fg);
  }
  
  .meta {
    font-size: 0.875rem;
    color: #94a3b8;
    margin-bottom: 16px;
    display: flex;
    gap: 16px;
    align-items: center;
  }
  
  .progress {
    height: 6px;
    background: rgba(0, 0, 0, 0.1);
    border-radius: 100px;
    overflow: hidden;
    border: none;
  }
  
  body.light .progress {
    background: rgba(0, 0, 0, 0.05);
  }
  
  .bar {
    height: 100%;
    background: linear-gradient(90deg, var(--success), #059669);
    width: 0%;
    transition: width 0.3s ease;
  }
  
  .row {
    display: flex;
    gap: 12px;
    margin-top: 16px;
  }
  
  .btn {
    flex: 1;
    padding: 12px 16px;
    border-radius: 10px;
    border: 1px solid var(--stroke);
    background: transparent;
    color: var(--fg);
    cursor: pointer;
    font-size: 0.875rem;
    font-weight: 500;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
  }
  
  .btn:hover {
    background: rgba(255, 255, 255, 0.05);
    transform: translateY(-1px);
  }
  
  .btn.primary {
    background: var(--brand);
    border-color: var(--brand);
    color: rgb(0, 0, 0);
  }
  
  .btn.primary:hover {
    background: var(--brand-hover);
    border-color: var(--brand-hover);
   
  }
  
  body.light .btn {
    background: white;
  }
  
  body.light .btn:hover {
    background: #f1f5f9;
  }
  
  /* Leaderboard */
  .panel {
    background: var(--card);
    border: 1px solid var(--stroke);
    border-radius: 16px;
    padding: 24px;
    height: max-content;
    position: sticky;
    top: 32px;
    backdrop-filter: blur(10px);
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  }
  
  .panel h3 {
    font-size: 1.25rem;
    font-weight: 600;
    margin-bottom: 20px;
    color: var(--fg);
    display: flex;
    align-items: center;
    gap: 8px;
  }
  
  .panel h3::before {
    content: 'üèÜ';
  }
  
  .lb {
    list-style: none;
  }
  
  .lb li {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px;
    border-bottom: 1px solid var(--stroke);
    transition: background-color 0.2s ease;
  }
  
  .lb li:hover {
    background: rgba(255, 255, 255, 0.02);
  }
  
  .lb li:last-child {
    border: none;
  }
  
  .lb .rank {
    font-weight: 600;
    color: var(--brand);
    min-width: 24px;
  }
  
  .lb .score {
    color: var(--success);
    font-weight: 500;
  }
  
  /* Modal */
  .modal {
    position: fixed;
    inset: 0;
    display: none;
    place-items: center;
    background: rgba(0, 0, 0, 0.7);
    padding: 20px;
    z-index: 50;
    backdrop-filter: blur(5px);
  }
  
  .modal .box {
    background: var(--bg);
    border: 1px solid var(--stroke);
    border-radius: 20px;
    max-width: 500px;
    width: 100%;
    padding: 24px;
    animation: modalSlideIn 0.3s ease;
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  }
  
  @keyframes modalSlideIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  .close {
    float: right;
    cursor: pointer;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.1);
    transition: all 0.2s ease;
  }
  
  .close:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: rotate(90deg);
  }
   @media (max-width: 768px) {
      .charts {
        gap: 20px;
      }
      .charts canvas {
        max-width: 100%;
        max-height: 180px;
      }
    }

    /* Responsive styles */
    @media(max-width:1024px){
      .main { padding:12px; }
      .cards, .charts { gap:12px; }
    }
    @media(max-width:768px){
      .hamburger { display:block; }
      .sidebar { 
        transform:translateX(-100%);
        width:220px;
        padding:16px;
      }
      .sidebar.show { transform:translateX(0); }
      .main { margin-left:0; padding-top:60px; }
      .header h1 { font-size:1.3em; }
      .cards { grid-template-columns:1fr; }
      .charts { grid-template-columns:1fr; }
    }
    @media(max-width:480px){
      .main { padding:8px; }
      .card { padding:10px; }
      .header h1 { font-size:1em; }
      .progress-ring { width:90px; height:90px; }
      .badge { font-size:12px; padding:4px 7px; }
    }

    /* Toast Notifications */
    #toastContainer {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 9999;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .toast {
      background: linear-gradient(135deg, #2563eb, #06b6d4);
      color: #fff;
      padding: 14px 18px;
      border-radius: 12px;
      font-weight: 600;
      box-shadow: 0 10px 25px rgba(0,0,0,0.15);
      animation: slideIn 0.4s ease, fadeOut 0.4s ease 2.6s forwards;
    }

    @keyframes slideIn {
      from {
        transform: translateX(120%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    @keyframes fadeOut {
      to {
        opacity: 0;
        transform: translateX(120%);
      }
    }
</style>
</head>
<body class="light">
 <!-- Mobile Hamburger -->
  <button class="hamburger" id="hamburger"><i class="fas fa-bars"></i></button>

  <!-- Sidebar -->
  <aside class="sidebar" id="sidebar">
    <div style="text-align:center; margin-bottom:20px;">
      <img src="swayam.png" alt="Swayam Logo" style="width:60px; height:60px; border-radius:50%; margin-bottom:10px;">
      <h2> Swayam</h2>
    </div>
    <ul>
      <li onclick="go('dashboard.html')">üè† Dashboard</li>
      <li class="active" onclick="go('courses.html')">üéì Courses</li>
      <li onclick="go('mentorship.html')">üë®‚Äçüè´ Mentorship</li>
      <li onclick="go('resume.html')">üìÑ Resume</li>
      <li onclick="go('hackathons.html')">üèÜ Hackathons</li>
    
    </ul>
  </aside>
  <!-- Main -->
  <main class="main">
    <div class="topbar">
      <div><h1>üìö Courses</h1></div>
      <div style="display: flex; gap: 12px; align-items: center;">
        <button class="mode" onclick="window.location.href='learning-platform.html'" style="display: flex; align-items: center; justify-content: center;"><i class="fa fa-book"></i></button>
        <button class="mode" id="theme"><i class="fa fa-sun"></i></button>
      </div>
    </div>

    <div class="grid">
      <!-- Course List -->
      <section class="courses">
        <article class="card" data-id="js101">
          <iframe src="https://www.youtube.com/embed/W6NZfCO5SIk" allowfullscreen></iframe>
          <div class="body">
            <div class="title">JavaScript Basics ‚ö°</div>
            <div class="meta"><span>‚è±Ô∏è 70m</span><span>‚≠ê 200 XP</span></div>
            <div class="progress"><div class="bar" style="width:35%"></div></div>
            <div class="row">
              <button class="btn" onclick="downloadOffline('js101')"><i class="fa fa-download"></i> Offline</button>
              <button class="btn primary" onclick="openQuiz('JavaScript Basics','js101')"><i class="fa fa-check"></i> Quiz</button>
            </div>
          </div>
        </article>

        <article class="card" data-id="dsa">
          <iframe src="https://www.youtube.com/embed/92S4zgXN17o" allowfullscreen></iframe>
          <div class="body">
            <div class="title">DSA Crash Course üß†</div>
            <div class="meta"><span>‚è±Ô∏è 3h</span><span>‚≠ê 350 XP</span></div>
            <div class="progress"><div class="bar" style="width:10%"></div></div>
            <div class="row">
              <button class="btn" onclick="downloadOffline('dsa')"><i class="fa fa-download"></i> Offline</button>
              <button class="btn primary" onclick="openQuiz('DSA Crash','dsa')"><i class="fa fa-check"></i> Quiz</button>
            </div>
          </div>
        </article>

        <article class="card" data-id="dsa">
          <iframe src="https://www.youtube.com/embed/92S4zgXN17o" allowfullscreen></iframe>
          <div class="body">
            <div class="title">DSA Crash Course üß†</div>
            <div class="meta"><span>‚è±Ô∏è 3h</span><span>‚≠ê 350 XP</span></div>
            <div class="progress"><div class="bar" style="width:10%"></div></div>
            <div class="row">
              <button class="btn" onclick="downloadOffline('dsa')"><i class="fa fa-download"></i> Offline</button>
              <button class="btn primary" onclick="openQuiz('DSA Crash','dsa')"><i class="fa fa-check"></i> Quiz</button>
            </div>
          </div>
        </article>
        
        <article class="card" data-id="dsa">
          <iframe src="https://www.youtube.com/embed/92S4zgXN17o" allowfullscreen></iframe>
          <div class="body">
            <div class="title">DSA Crash Course üß†</div>
            <div class="meta"><span>‚è±Ô∏è 3h</span><span>‚≠ê 350 XP</span></div>
            <div class="progress"><div class="bar" style="width:10%"></div></div>
            <div class="row">
              <button class="btn" onclick="downloadOffline('dsa')"><i class="fa fa-download"></i> Offline</button>
              <button class="btn primary" onclick="openQuiz('DSA Crash','dsa')"><i class="fa fa-check"></i> Quiz</button>
            </div>
          </div>
        </article>
      </section>

      <!-- Leaderboard -->
      <aside class="panel">
        <h3> Leaderboard</h3>
        <ul class="lb" id="leaderboard"></ul>
      </aside>
    </div>
  </main>

  <!-- Quiz Modal -->
  <div class="modal" id="quizModal">
    <div class="box">
      <span class="close" onclick="closeQuiz()">‚úñ</span>
      <h2 id="quizTitle">Quiz</h2>
      <p>1) JS runs in the‚Ä¶</p>
      <label><input type="radio" name="q1"> Browser & Node.js</label><br>
      <label><input type="radio" name="q1"> Only Database</label>
      <p>2) const creates‚Ä¶</p>
      <label><input type="radio" name="q2"> Mutable variable</label><br>
      <label><input type="radio" name="q2"> Immutable binding</label>
      <br><br>
      <button class="btn primary" onclick="submitQuiz()">Submit</button>
    </div>
  </div>

<script async>
  const theme=document.getElementById('theme');const body=document.body;
  theme.onclick=()=>{body.classList.toggle('light');body.classList.toggle('dark');
    theme.innerHTML=body.classList.contains('dark')?'<i class="fa fa-sun"></i>':'<i class="fa fa-moon"></i>'};


  // Offline download placeholder
  function downloadOffline(id){ alert("üì• Added "+id+" for offline (demo)"); }

  // Quiz logic
  const quiz=document.getElementById('quizModal'); const qt=document.getElementById('quizTitle'); let current="";
  function openQuiz(title,id){current=id;qt.textContent="Quiz: "+title;quiz.style.display="grid";}
  function closeQuiz(){quiz.style.display="none";}
  async function submitQuiz(){
    quiz.style.display="none";
    const bar=document.querySelector(`.card[data-id="${current}"] .bar`);
    if(bar){let w=parseInt(bar.style.width)||0;bar.style.width=Math.min(w+30,100)+"%";}
    
    // Award 50 XP to Supabase and show toast
    await addXP(50);
    showXPToast(50, "Quiz Completed");
  }

  // Sidebar navigation for all pages
  function go(path){ window.location.href=path; }
  // Hamburger toggle
const hamburger = document.getElementById("hamburger");
const sidebar = document.getElementById("sidebar");
hamburger.addEventListener("click",()=>{
  sidebar.classList.toggle("show");
});

// Hide sidebar on nav click (mobile)
sidebar.querySelectorAll("li").forEach(li=>{
  li.addEventListener("click",()=>{
    if(window.innerWidth<=768) sidebar.classList.remove("show");
  });
});

// Responsive: close sidebar on resize if desktop
window.addEventListener("resize",()=>{
  if(window.innerWidth>768) sidebar.classList.remove("show");
});
</script>

<!-- Leaderboard Sync Script -->
<script type="module">
// ========== LEADERBOARD SYNC WITH DASHBOARD ==========
import { createClient } from "https://esm.sh/@supabase/supabase-js@2";
const SUPABASE_URL = "https://xyakbprycadzleexjpoi.supabase.co";
const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh5YWticHJ5Y2FkemxlZXhqcG9pIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI1MDAyNTMsImV4cCI6MjA3ODA3NjI1M30.z4IqtEj02jyPE9d5bKH1UP_lxRm3ZcBCUcy7t5LUvrg";
const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

// ‚úÖ HELPER: Add XP to user profile
window.addXP = async function(amount) {
  const { data: { user } } = await supabase.auth.getUser();
  if (!user) return;

  const { data: profile, error } = await supabase
    .from("profiles")
    .select("xp")
    .eq("id", user.id)
    .single();

  if (error) {
    console.error("XP fetch failed", error);
    return;
  }

  await supabase
    .from("profiles")
    .update({
      xp: (profile.xp || 0) + amount
    })
    .eq("id", user.id);
    
  console.log(`‚úÖ Added ${amount} XP`);
}

// ‚úÖ HELPER: Show XP toast notification
window.showXPToast = function(xp, label = "XP Earned") {
  const container = document.getElementById("toastContainer");
  const toast = document.createElement("div");
  toast.className = "toast";
  toast.innerHTML = `‚ú® ${label} <strong>+${xp} XP</strong>`;
  container.appendChild(toast);
  
  setTimeout(() => {
    toast.remove();
  }, 3000);
}

const leaderboardEl = document.getElementById("leaderboard");

function renderLeaderboard(rows) {
  leaderboardEl.innerHTML = "";
  const sorted = [...rows].sort((a, b) => (b.xp || 0) - (a.xp || 0)).slice(0, 10);
  
  sorted.forEach((r, idx) => {
    const li = document.createElement("li");
    const firstName = r.name ? r.name.split(' ')[0] : r.email.split('@')[0];
    const rankEmoji = idx === 0 ? 'ü•á' : idx === 1 ? 'ü•à' : idx === 2 ? 'ü•â' : '‚ú®';
    li.innerHTML = `<span>${rankEmoji} ${firstName}</span><span class="score">${r.xp || 0} XP</span>`;
    leaderboardEl.appendChild(li);
  });
}

async function fetchLeaderboard() {

  try {
    const { data, error } = await supabase.from('profiles').select('id,name,email,xp').order('xp', { ascending: false }).limit(10);
    if (error) {
      console.error("Leaderboard fetch error", error);
      return;
    }
    console.log("Leaderboard data fetched:", data);
    renderLeaderboard(data || []);
  } catch (err) {
    console.error("Leaderboard fetch exception:", err);
  }
}

// Fetch leaderboard on page load
fetchLeaderboard();

// Subscribe to realtime leaderboard updates
const channel = supabase.channel('public:profiles')
  .on('postgres_changes', { event: '*', schema: 'public', table: 'profiles' }, payload => {
    fetchLeaderboard();
  })
  .subscribe();

// Listen for leaderboard updates from dashboard
window.addEventListener('leaderboardUpdate', (e) => {
  fetchLeaderboard();
});
</script>

<!-- Toast Container for XP notifications -->
<div id="toastContainer"></div>

</body>
</html>
